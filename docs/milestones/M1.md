# Milestone 1 (M1) — Stabilisieren / Shipping‑fähig

Stand: 2025-12-15

## Ziel
Milestone 1 fokussiert auf “Closure”: Quality Gates, minimaler Regression‑Schutz, CI‑Absicherung sowie Hardening/Robustness an kritischen Stellen (API + Storage) — ohne Feature‑Scope zu erweitern.

## Umgesetzte Tickets (M1‑T1 … M1‑T7)

### M1‑T1 — Quality Gates als Scripts
- `npm run lint`, `npm run typecheck`, `npm run test`, `npm run build`
- `npm run preflight` als Sammel‑Gate

### M1‑T2 — Test‑Harness + erste Unit Tests (pure libs)
- Vitest integriert (`vitest.config.ts`)
- Erste Unit Tests für pure Logic (Notes Parser / Embeddings)

### M1‑T3 — CI Workflow (GitHub Actions)
- Workflow `.github/workflows/ci.yml` für lint/typecheck/test/build (Node 20, `npm ci`, Cache)

### M1‑T4 — Ollama Host “Single Source of Truth”
- Ollama‑Host konsistent über Settings/Parameter (weniger Hardcoding, bessere Portabilität)

### M1‑T5 — Unified Search → Chat Deep‑Link `?load=`
- Search‑Ergebnisse für Chats öffnen `/chat?load=<id>` und laden die gespeicherte Konversation

### M1‑T6 — API Hardening v1 (dangerous APIs)
- Lokale Requests werden best‑effort validiert (localhost‑only Default)
- Optionaler Token‑Schutz via `LOCAI_API_TOKEN`

### M1‑T7 — Storage Robustness v1 (Bild‑Chats/Quota)
- Quota‑Fallback beim Speichern: große Bild‑Payloads werden durch Platzhalter ersetzt (Retry max. 1×)
- Reduziert Crash-/Datenverlust‑Risiko bei Bild‑Chats in `localStorage`

## Verifikation (lokal)
- Quality Gates: `npm run preflight`
- Mini Smoke‑Test: `npm run dev` und kurz diese Routes öffnen: `/chat`, `/search`, `/notes`

## Hinweise / Follow‑ups
- `npm run lint` ist aktuell “grün” mit Warnings; optional nach M1 bereinigen (unused vars, alt‑Attribute, Hook deps, `any`‑Typen).

